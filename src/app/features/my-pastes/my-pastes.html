<div class="space-y-6">
  <!-- Header -->
  <div class="flex items-center justify-between">
    <div>
      <h1 class="text-3xl font-bold mb-2">My Pastes</h1>
      <p class="text-zinc-400">Manage all your pastes in one place</p>
    </div>
    <button
      (click)="createNewPaste()"
      [class]="'flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 ' +
               themeConfig().accent"
    >
      <lucide-icon [img]="Plus" [size]="20"></lucide-icon>
      <span>New Paste</span>
    </button>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading()" class="flex items-center justify-center py-20">
    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"></div>
  </div>

  <!-- Error State -->
  <div
    *ngIf="error() && !loading()"
    class="bg-red-500/10 border border-red-500 text-red-500 rounded-lg p-4 text-center"
  >
    <p>{{ error() }}</p>
    <button
      (click)="loadPastes()"
      class="mt-4 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors"
    >
      Try Again
    </button>
  </div>

  <!-- Empty State -->
  <div
    *ngIf="!loading() && !error() && pastes().length === 0"
    [class]="'rounded-lg p-12 text-center border ' + themeConfig().card + ' ' + themeConfig().border"
  >
    <lucide-icon [img]="FileText" [size]="64" class="text-zinc-700 mx-auto mb-4"></lucide-icon>
    <h3 class="text-xl font-semibold mb-2">No pastes yet</h3>
    <p class="text-zinc-400 mb-6">Create your first paste to get started</p>
    <button
      (click)="createNewPaste()"
      [class]="'inline-flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-colors ' +
               themeConfig().accent"
    >
      <lucide-icon [img]="Plus" [size]="20"></lucide-icon>
      <span>Create Paste</span>
    </button>
  </div>

  <!-- Pastes List -->
  <div *ngIf="!loading() && !error() && pastes().length > 0" class="space-y-3">
    <div
      *ngFor="let paste of pastes()"
      (click)="viewPaste(paste.id)"
      [class]="'rounded-lg p-5 border transition-all cursor-pointer transform hover:scale-[1.01] ' +
               themeConfig().card + ' ' + themeConfig().border + ' ' + themeConfig().hover"
    >
      <div class="flex items-start justify-between gap-4">
        <!-- Content -->
        <div class="flex-1 min-w-0">
          <!-- Title -->
          <h3 class="text-lg font-semibold mb-2 truncate">{{ paste.title || 'Untitled Paste' }}</h3>

          <!-- Preview -->
          <p class="text-sm text-zinc-400 mb-3 line-clamp-2 font-mono">
            {{ getPreview(paste.content) }}
          </p>

          <!-- Meta Info -->
          <div class="flex items-center gap-4 text-xs text-zinc-500">
            <!-- Visibility -->
            <span class="flex items-center gap-1.5">
              <lucide-icon [img]="getVisibilityIcon(paste.visibility)" [size]="14"></lucide-icon>
              <span>{{ getVisibilityLabel(paste.visibility) }}</span>
            </span>

            <!-- Date -->
            <span class="flex items-center gap-1.5">
              <lucide-icon [img]="Clock" [size]="14"></lucide-icon>
              <span>{{ formatDate(paste.createdAt) }}</span>
            </span>

            <!-- Expiry -->
            <span *ngIf="paste.expiresAt" class="flex items-center gap-1.5 text-orange-500">
              <span>‚è∞</span>
              <span>Expires {{ formatDate(paste.expiresAt) }}</span>
            </span>
          </div>
        </div>

        <!-- Actions -->
        <div class="flex items-center gap-2" (click)="$event.stopPropagation()">
          <!-- Copy Link -->
          <button
            [class]="'p-2 rounded-lg transition-colors ' + themeConfig().hover"
            title="Copy link"
          >
            <lucide-icon [img]="Copy" [size]="18" class="text-zinc-400"></lucide-icon>
          </button>

          <!-- Delete -->
          <button
            [disabled]="deletingId() === paste.id"
            [class]="'p-2 rounded-lg transition-colors hover:bg-red-500/10 hover:text-red-500 disabled:opacity-50 ' +
                     (deletingId() === paste.id ? 'cursor-not-allowed' : '')"
            title="Delete"
          >
            <lucide-icon
              [img]="Trash2"
              [size]="18"
              [class]="deletingId() === paste.id ? 'animate-spin' : 'text-zinc-400'"
            ></lucide-icon>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
